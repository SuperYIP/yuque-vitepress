import{_ as a,o as s,c as n,R as e}from"./chunks/framework.3LEfkZv-.js";const t="/assets/87a2f83d831d6b2d8d796b55927304bc.uSsUjrwE.png",o="/assets/a21b82a1a8f6a10eb0577d35fa6973fc.EU1XjXRm.png",p="/assets/409319d6f5fcf91bd6573a8f4573180d.0Vn3A34Q.png",l="/assets/939bea7f5617a39e1850e289e04b3054.9Zfb5TAY.png",i="/assets/329fe9697785d6c2a58f19a1859c2fc9.p8CpWg3n.png",d="/assets/1f5d2f5022a25f2b8b94ff71fd538728.Q6nf5q-r.png",f=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"docs/Android/搭建Android环境.md","filePath":"docs/Android/搭建Android环境.md","lastUpdated":1702732998000}'),r={name:"docs/Android/搭建Android环境.md"},c=e('<h3 id="一、安装-jdk" tabindex="-1"><strong>一、安装 JDK</strong> <a class="header-anchor" href="#一、安装-jdk" aria-label="Permalink to &quot;**一、安装 JDK**&quot;">​</a></h3><p><strong>下载地址：</strong><a href="https://www.oracle.com/cn/java/technologies/downloads/#java11-mac" target="_blank" rel="noreferrer">https://www.oracle.com/cn/java/technologies/downloads/#java11-mac</a><br><strong>建议安装jdk8和jdk11两个版本。（两个都要装）</strong></p><blockquote><p><strong>jdk8下载地址：</strong><a href="https://download.oracle.com/otn/java/jdk/8u381-b09/8c876547113c4e4aab3c868e9e0ec572/jdk-8u381-macosx-x64.dmg" target="_blank" rel="noreferrer"><strong>https://download.oracle.com/otn/java/jdk/8u381-b09/8c876547113c4e4aab3c868e9e0ec572/jdk-8u381-macosx-x64.dmg</strong></a></p></blockquote><blockquote><p><strong>jdk11下载地址：</strong><a href="https://www.oracle.com/java/technologies/javase/jdk11-archive-downloads.html" target="_blank" rel="noreferrer"><strong>https://www.oracle.com/java/technologies/javase/jdk11-archive-downloads.html</strong></a></p></blockquote><p>安装完成后，在终端执行：<code>java -version</code>即可查看java版本，<code>java version &quot;1.8.0_381&quot;</code>表示的就是jdk8。</p><h3 id="二、安装-gradle" tabindex="-1"><strong>二、安装 Gradle</strong> <a class="header-anchor" href="#二、安装-gradle" aria-label="Permalink to &quot;**二、安装 Gradle**&quot;">​</a></h3><p>推荐用sdkman安装gradle，方便版本切换</p><h4 id="安装sdkman-https-sdkman-io-install" tabindex="-1">安装sdkman：<a href="https://sdkman.io/install" target="_blank" rel="noreferrer">https://sdkman.io/install</a> <a class="header-anchor" href="#安装sdkman-https-sdkman-io-install" aria-label="Permalink to &quot;安装sdkman：https://sdkman.io/install&quot;">​</a></h4><ol><li>打开终端，执行如下命令：</li></ol><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>curl -s &quot;https://get.sdkman.io&quot; | bash</span></span></code></pre></div><ol start="2"><li>新建一个终端，执行如下命令：</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">source</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$HOME</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/.sdkman/bin/sdkman-init.sh&quot;</span></span></code></pre></div><p>若执行<code>sdk version</code>出现<code>sdkman 5.18.2</code>则表示安装成功</p><h4 id="安装sdkman失败记录" tabindex="-1">安装sdkman失败记录 <a class="header-anchor" href="#安装sdkman失败记录" aria-label="Permalink to &quot;安装sdkman失败记录&quot;">​</a></h4><p>执行<code>curl -s &quot;[https://get.sdkman.io&quot;](https://get.sdkman.io&quot;) | bash</code>后，执行<code>source &quot;$HOME/.sdkman/bin/sdkman-init.sh&quot;</code>失败，发现<code>.sdkman</code>目录下没有生成bin文件夹。<br>关闭代理（clashx）后，删除<code>.sdkman</code>文件夹<code>rm -rf ~/.sdkman</code>，在终端执行：<code>export https_proxy=http://127.0.0.1:7890;export http_proxy=http://127.0.0.1:7890;</code>重新执行安装步骤，成功。<br><code>export https_proxy=http://127.0.0.1:7890;export http_proxy=http://127.0.0.1:7890</code>命令是一次性的，只在当前终端生效，7890端口为clash的端口，查看方式如下：<br><img src="'+t+`" alt="image.png"><br>配置文件夹下打开config.yaml文件，查看端口号，即mixed-port: 7890</p><h4 id="用sdkman安装gradle-如安装gradle7-4版本命令如下" tabindex="-1">用sdkman安装gradle，如安装gradle7.4版本命令如下： <a class="header-anchor" href="#用sdkman安装gradle-如安装gradle7-4版本命令如下" aria-label="Permalink to &quot;用sdkman安装gradle，如安装gradle7.4版本命令如下：&quot;">​</a></h4><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>sdk install gradle 7.4</span></span></code></pre></div><h3 id="三、安装-android-studio" tabindex="-1"><strong>三、安装 Android Studio</strong> <a class="header-anchor" href="#三、安装-android-studio" aria-label="Permalink to &quot;**三、安装 Android Studio**&quot;">​</a></h3><h4 id="一-下载-android-studio" tabindex="-1">（一）下载 Android Studio <a class="header-anchor" href="#一-下载-android-studio" aria-label="Permalink to &quot;（一）下载 Android Studio&quot;">​</a></h4><p>下载地址：<a href="https://developer.android.google.cn/studio" target="_blank" rel="noreferrer">https://developer.android.google.cn/studio</a> 直接下载最新的dmg文件，安装，一直点 Next 下一步直到完成。</p><h4 id="二-设置proxy" tabindex="-1">（二）设置Proxy <a class="header-anchor" href="#二-设置proxy" aria-label="Permalink to &quot;（二）设置Proxy&quot;">​</a></h4><ol><li>打开新安装的 Android Studio</li><li>点击 Android Studio——&gt;settings——&gt;Appearance &amp; Behavior——&gt;System Settings ——&gt;Http Proxy</li><li>选择 Manual proxy configuration - HTTP</li><li>填写 Host name : <code>mirrors.neusoft.edu.cn</code></li><li>填写 Port number : <code>80</code></li><li>点击右下角的 Apply</li><li>点击右下角的 OK</li></ol><h4 id="三-配置sdk" tabindex="-1">（三）配置SDK <a class="header-anchor" href="#三-配置sdk" aria-label="Permalink to &quot;（三）配置SDK&quot;">​</a></h4><ol><li>打开新安装的 Android Studio</li><li>点击 Android Studio——&gt;settings——&gt;Languages &amp; Fragment ——&gt;Android SDK</li><li>配置AndroidSDK目录</li><li>SDK Platforms勾选33、34</li><li>SDK Tools选择Android SDK Build-Tools 34、Android SDK Platform-Tools</li><li>勾选右下角“Apply” 进行下载</li></ol><h3 id="四、配置环境变量" tabindex="-1"><strong>四、配置环境变量</strong> <a class="header-anchor" href="#四、配置环境变量" aria-label="Permalink to &quot;**四、配置环境变量**&quot;">​</a></h3><ul><li>进入当前用户的home目录，查看是否有.bash_profile文件</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>cd ~</span></span>
<span class="line"><span>ls -la | grep &#39;bash_profile&#39;</span></span>
<span class="line"><span>#如果没有文件则执行下边命令创建</span></span>
<span class="line"><span>touch .bash_profile</span></span></code></pre></div><ul><li>执行<code>open .bash_profile</code>打开该文件</li><li>配置jdk、Gradle、AndroidTools全局环境变量(<strong>/jdk-1.8.jdk/目录需要根据自己安装的版本进行配置</strong>)</li></ul><blockquote><p>Mac电脑上adb的安装与配置： <a href="https://zhuanlan.zhihu.com/p/415513259" target="_blank" rel="noreferrer">https://zhuanlan.zhihu.com/p/415513259</a></p></blockquote><p>查看sdk路径：<br><img src="`+o+`" alt="image.png"></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>source /opt/homebrew/opt/nvm/nvm.sh</span></span>
<span class="line"><span>#export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk-1.8.jdk/Contents/Home</span></span>
<span class="line"><span>#THIS MUST BE AT THE END OF THE FILE FOR SDKMAN TO WORK!!!</span></span>
<span class="line"><span>export SDKMAN_DIR=&quot;$HOME/.sdkman&quot;</span></span>
<span class="line"><span>[[ -s &quot;$HOME/.sdkman/bin/sdkman-init.sh&quot; ]] &amp;&amp; source &quot;$HOME/.sdkman/bin/sdkman-init.sh&quot;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>export JAVA8_HOME=/Library/Java/JavaVirtualMachines/jdk-1.8.jdk/Contents/Home</span></span>
<span class="line"><span>export JAVA11_HOME=/Library/Java/JavaVirtualMachines/jdk-11.jdk/Contents/Home</span></span>
<span class="line"><span>#快速在命令行切换jdk版本命令</span></span>
<span class="line"><span>alias jdk8=&#39;export JAVA_HOME=$JAVA8_HOME&#39;</span></span>
<span class="line"><span>alias jdk11=&#39;export JAVA_HOME=$JAVA11_HOME&#39;</span></span>
<span class="line"><span>#default java11</span></span>
<span class="line"><span>export JAVA_HOME=$JAVA11_HOME</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#设置Android相关环境变量</span></span>
<span class="line"><span>#export ANDROID_HOME=~/android-sdks;</span></span>
<span class="line"><span>export ANDROID_HOME=/Users/qitmac001378/Library/Android/sdk;	#这种配置sdk环境变量的方式比较好，上面那种方式不能使用adb命令</span></span>
<span class="line"><span>export ANDROID_HOME_TOOLS=\${ANDROID_HOME}/platform-tools;</span></span>
<span class="line"><span>export ANDROID_TOOLS=\${ANDROID_HOME}/tools:\${ANDROID_HOME}/build-tools/33.0.0:\${ANDROID_HOME}/cmdline-tools/latest/bin;</span></span>
<span class="line"><span>export ANDROID_NDK_HOME=\${ANDROID_HOME}/ndk-bundle;</span></span>
<span class="line"><span>#设置Gradle相关环境变量</span></span>
<span class="line"><span>export GRADLE_HOME=~/.sdkman/candidates/gradle/current/bin;</span></span>
<span class="line"><span>export PATH=\${PATH}:\${ANDROID_HOME}:\${ANDROID_HOME_TOOLS}:\${ANDROID_TOOLS}:\${GRADLE_HOME}:\${ANDROID_NDK_HOME}/toolchains/aarch64-linux-android-4.9/prebuilt/darwin-x86_64/bin;</span></span></code></pre></div><ul><li>cmd + s 保存文件，切到终端窗口，执行如下命令：</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>source .bash_profile</span></span></code></pre></div><ul><li>查看gradle版本号，在终端执行如下命令：<code>gradle -v</code>，出现下边提示，就代表gradle配置成功了</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>qitmac001378@bogon ~ % gradle -v           </span></span>
<span class="line"><span></span></span>
<span class="line"><span>Welcome to Gradle 7.4!</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Here are the highlights of this release:</span></span>
<span class="line"><span> - Aggregated test and JaCoCo reports</span></span>
<span class="line"><span> - Marking additional test source directories as tests in IntelliJ</span></span>
<span class="line"><span> - Support for Adoptium JDKs in Java toolchains</span></span>
<span class="line"><span></span></span>
<span class="line"><span>For more details see https://docs.gradle.org/7.4/release-notes.html</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>------------------------------------------------------------</span></span>
<span class="line"><span>Gradle 7.4</span></span>
<span class="line"><span>------------------------------------------------------------</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Build time:   2022-02-08 09:58:38 UTC</span></span>
<span class="line"><span>Revision:     f0d9291c04b90b59445041eaa75b2ee744162586</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Kotlin:       1.5.31</span></span>
<span class="line"><span>Groovy:       3.0.9</span></span>
<span class="line"><span>Ant:          Apache Ant(TM) version 1.10.11 compiled on July 10 2021</span></span>
<span class="line"><span>JVM:          11.0.19 (Oracle Corporation 11.0.19+9-LTS-224)</span></span>
<span class="line"><span>OS:           Mac OS X 13.0 aarch64</span></span></code></pre></div><ul><li>最后Android Studio配置gradle</li></ul><p>在Android Studio，选择 Preferences ，选择Build,Execution, Deployment --&gt;Build Tools --&gt;Gradle，配置 Gradle user home：~/.sdkman/candidates/gradle/7.4，点击右下角的 Apply，然后点击右下角的 OK。<br>上述方式设置的是相对路径，可能会有找不到gradle的问题，按下图设置绝对路径解决问题：<br><img src="`+p+'" alt="image.png"><br>mac快捷键：<code>command + shift + .</code>可以查看隐藏文件，找到.sdkman，一路向下找到gradle。<br><img src="'+l+'" alt="image.png"><br><img src="'+i+`" alt="image.png"></p><p><strong>五、构建项目</strong><br>如果构建项目时报错，无法下载com.android.tools.build:gradle:x.x.x&#39; &quot;HTTP/1.1 400 Bad Request 之类的信息。就配置成clashx的代理。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>1. 打开 Android Studio</span></span>
<span class="line"><span>2. 点击 Android Studio——&gt;settings——&gt;Appearance &amp; Behavior——&gt;System Settings ——&gt;Http Proxy</span></span>
<span class="line"><span>3. 选择 Manual proxy configuration - HTTP</span></span>
<span class="line"><span>4. 填写 Host name : localhost</span></span>
<span class="line"><span>5. 填写 Port number : 7890</span></span>
<span class="line"><span>6. 点击右下角的 Apply</span></span>
<span class="line"><span>7. 点击右下角的 OK</span></span></code></pre></div><h3 id="六、启动项目报错" tabindex="-1">六、启动项目报错 <a class="header-anchor" href="#六、启动项目报错" aria-label="Permalink to &quot;六、启动项目报错&quot;">​</a></h3><blockquote><p>参考：<a href="https://blog.csdn.net/g984160547/article/details/118612073" target="_blank" rel="noreferrer">https://blog.csdn.net/g984160547/article/details/118612073</a></p></blockquote><p>安卓模拟器下载失败，按下图把Emulator下载上问题解决。<br><img src="`+d+'" alt="image.png"></p>',42),h=[c];function g(u,m,k,b,_,A){return s(),n("div",null,h)}const O=a(r,[["render",g]]);export{f as __pageData,O as default};
